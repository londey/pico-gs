# REQ-003.04: Swizzle Patterns

## Classification

- **Priority:** Important
- **Stability:** Stable
- **Verification:** Demonstration

## Requirement

When a texture unit is configured with a non-identity SWIZZLE field in TEXn_FMT, the system SHALL reorder the decoded texture color channels according to the programmed swizzle pattern before passing the texel to the color combiner stage.

## Rationale

Swizzle patterns enable flexible texture channel mapping, allowing assets to be stored with different channel orderings (e.g., BGRA) or reused across different contexts (e.g., grayscale textures replicated to RGB via RRR1 pattern) without requiring separate texture copies.

## Parent Requirements

REQ-003

## Allocated To

- UNIT-006 (Pixel Pipeline)

## Interfaces

- INT-010 (GPU Register Map) - TEXn_CFG.SWIZZLE field definition
- INT-014 (Texture Memory Layout) - Swizzle application order

## Verification Method

**Demonstration:** The system SHALL meet the following acceptance criteria:

- [ ] Set TEXn_CFG.SWIZZLE to select channel ordering (INT-010)
- [ ] Swizzle applies after texture decode, before color combining (INT-014)
- [ ] Support RGBA (identity, default)
- [ ] Support BGRA (swap red/blue)
- [ ] Support RRR1 (grayscale - replicate R to RGB, alpha=1)
- [ ] Support at least 13 predefined swizzle patterns (see INT-010)
- [ ] Undefined patterns default to RGBA
- [ ] Swizzle applies before color combining (REQ-004.01)
- [ ] Works correctly with all supported formats: BC1, BC2, BC3, BC4, RGB565, RGBA8888, R8

---


## Notes

Swizzle patterns allow efficient reuse of grayscale textures (e.g., RRR1 replicates red channel to all RGB components) and accommodate different source channel orderings (e.g., BGRA for assets stored with blue-first layout).
Swizzle applies after texture decode and before color combining (REQ-004.01).
At least 13 predefined patterns must be supported; undefined pattern codes default to RGBA (identity).
