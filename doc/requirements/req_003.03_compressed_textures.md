# REQ-003.03: Compressed Textures

## Classification

- **Priority:** Important
- **Stability:** Stable
- **Verification:** Demonstration

## Requirement

When firmware configures a texture unit with a block-compressed format (BC1, BC2, BC3, or BC4) via the TEXn_CFG register, the system SHALL decode the compressed block data and sample texels using the decompressed output specified in INT-014.

## Rationale

Block-compressed formats provide significant memory savings over uncompressed alternatives, enabling more texture data to fit in the SDRAM texture region.
BC1 achieves 4:1 compression over RGB565 and 8:1 over RGBA8888 at the cost of some quality loss.
BC2 and BC3 preserve full alpha at 8:1 compression over RGBA8888.
BC4 provides efficient single-channel storage for heightmaps, ambient occlusion, and similar data.

## Parent Requirements

REQ-003

## Allocated To

- UNIT-006 (Pixel Pipeline)

## Interfaces

- INT-010 (GPU Register Map) - TEXn_CFG.FORMAT field
- INT-014 (Texture Memory Layout) - BC format specifications

## Verification Method

**Demonstration:** The system SHALL meet the following acceptance criteria:

- [ ] Set TEXn_CFG.FORMAT=0 (BC1) to enable BC1 mode
- [ ] Texture width and height are multiples of 4 (required for all BC formats)
- [ ] BC1 sampling correctly decodes 8-byte blocks (2 RGB565 endpoints + 2-bit indices)
- [ ] BC1 4-color palette correctly interpolated (color0 > color1 case)
- [ ] BC1 1-bit alpha mode correctly handled (color0 ≤ color1 case)
- [ ] Set TEXn_CFG.FORMAT=1 (BC2) to enable BC2 mode
- [ ] BC2 sampling correctly decodes 16-byte blocks (4-bit explicit alpha + BC1 color block)
- [ ] Set TEXn_CFG.FORMAT=2 (BC3) to enable BC3 mode
- [ ] BC3 sampling correctly decodes 16-byte blocks (BC3 alpha interpolation + BC1 color block)
- [ ] Set TEXn_CFG.FORMAT=3 (BC4) to enable BC4 mode
- [ ] BC4 sampling correctly decodes 8-byte blocks (BC3-style alpha encoding, single red channel)
- [ ] Compressed data uploaded via MEM_ADDR/MEM_DATA registers (same as other formats)
- [ ] BC1 achieves 4:1 memory reduction vs RGB565, 8:1 vs RGBA8888

---


## Notes

All BC formats use 4×4 texel blocks as the fundamental storage unit, matching the overall texture memory organization (INT-014).
BC2/BC3 are functionally equivalent in color decode; they differ only in alpha handling (explicit 4-bit vs. interpolated 8-entry palette).
See INT-014 for complete bit-level format specifications and address calculation formulas.
