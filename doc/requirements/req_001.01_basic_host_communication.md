# REQ-001.01: Basic Host Communication

## Classification

- **Priority:** Important
- **Stability:** Stable
- **Verification:** Demonstration

## Requirement

When the host firmware needs to configure the GPU or submit primitives, the system SHALL accept 72-bit SPI transactions (1 R/W + 7 addr + 64 data bits) in Mode 0 format and complete register writes within a deterministic cycle count.

## Rationale

The RP2350 host must communicate with the FPGA GPU over a wired interface. SPI was selected because it provides sufficient bandwidth (25 MHz = ~3 MB/s), requires minimal pin count (4 pins + CS), has hardware support on both RP2350 and ECP5 FPGA, and is deterministic (critical for real-time rendering). The 72-bit transaction format (7-bit address + 64-bit data) aligns with the GPU's 64-bit register width.

## Parent Requirements

- REQ-001 (GPU SPI Controller)

## Allocated To

- UNIT-001 (SPI Slave Controller)
- UNIT-002 (Command FIFO)
- UNIT-003 (Register File)

## Interfaces

- INT-001 (SPI Mode 0 Protocol)
- INT-010 (GPU Register Map)
- INT-012 (SPI Transaction Format)

## Verification Method

**Demonstration:** The system SHALL meet the following acceptance criteria:

- [ ] SPI slave accepts 72-bit transactions (1 R/W + 7 addr + 64 data)
- [ ] Register writes complete within predictable cycle count
- [ ] CMD_FULL GPIO asserts when command buffer is near capacity
- [ ] CMD_EMPTY GPIO asserts when safe to read status registers
- [ ] VSYNC GPIO pulses at frame boundaries

---


## Notes

This is the foundational communication requirement.
All other GPU functionality depends on the ability to write to registers via SPI transactions.

**Boot command pre-population (DD-019):** In addition to SPI-sourced register writes, the command FIFO (UNIT-002) contains pre-populated boot commands at power-on that execute autonomously before any SPI traffic.
These boot commands use the same 72-bit format and flow through the same register file path as SPI transactions.
This does not change the SPI communication requirement itself; the host SPI interface operates identically regardless of whether boot commands have been previously consumed.
The host should observe that CMD_EMPTY=1 on first contact, indicating the boot commands have already been drained.
