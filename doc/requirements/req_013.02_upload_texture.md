# REQ-013.02: Upload Texture

## Classification

- **Priority:** Essential
- **Stability:** Stable
- **Verification:** Test

## Requirement

When an UploadTexture command is dispatched, the system SHALL write the texture data to GPU SDRAM via the MEM_ADDR/MEM_DATA auto-increment register protocol, starting at the target SDRAM address specified in the command, and SHALL complete the upload before issuing any subsequent triangle submission commands that reference that texture.

## Rationale

Texture data must be resident in GPU SDRAM before any triangle that references it is submitted.
The MEM_ADDR/MEM_DATA auto-increment protocol (INT-010) provides the bulk upload path over the SPI register interface.

## Parent Requirements

REQ-013 (Host SPI Driver)

## Allocated To

- UNIT-021 (Core 1 Render Executor)
- UNIT-022 (GPU Driver Layer)

## Interfaces

- INT-010 (GPU Register Map) — MEM_ADDR/MEM_DATA registers
- INT-011 (SDRAM Memory Layout) — texture region address constraints
- INT-014 (Texture Memory Layout) — per-format block organization and size
- INT-020 (GPU Driver API)

## Verification Method

**Test:** Verify that an UploadTexture command produces the expected sequence of MEM_ADDR write followed by MEM_DATA writes for a known texture payload, with the correct target SDRAM address.
Verify that no triangle submission register writes occur between the MEM_ADDR setup and the final MEM_DATA write of the upload sequence.

## Notes

The UploadTexture command carries a pointer to texture data in flash and the target SDRAM base address.
The GPU driver performs the upload synchronously before returning, ensuring ordering with subsequent triangle submission.
Texture layout in SDRAM must conform to INT-011 (SDRAM Memory Layout) and INT-014 (Texture Memory Layout).
Supported texture formats for upload are defined in INT-014: RGBA4444, BC1, RGB565, RGBA8888, and R8.
Each format uses a 4×4 block organization on disk and in SDRAM; the upload sequence is format-agnostic (the host writes raw bytes via MEM_DATA).
